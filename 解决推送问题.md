# 解决 Git Push 被拒绝问题

## ⚠️ 问题说明

错误信息：`[rejected] main -> main (fetch first)`

这表示远程仓库（GitHub）包含本地没有的提交。常见原因：
- GitHub 仓库中已有初始文件（如 README.md）
- 其他机器推送过代码

## 🔧 解决方案

### 方案 1: 拉取并合并（推荐）

先拉取远程更改，合并后再推送：

```bash
# 1. 拉取远程更改
git pull origin main --allow-unrelated-histories

# 2. 如果有冲突，解决冲突后
git add .
git commit -m "合并远程更改"

# 3. 推送
git push -u origin main
```

### 方案 2: 强制推送（谨慎使用）

⚠️ **警告**：这会覆盖远程仓库的所有更改！

```bash
git push -u origin main --force
```

### 方案 3: 重置并强制推送（如果想完全替换远程）

```bash
# 1. 先备份（可选）
git branch backup-main

# 2. 强制推送
git push -u origin main --force
```

## 📋 推荐步骤

### 步骤 1: 查看远程和本地的差异

```bash
# 获取远程信息（不合并）
git fetch origin

# 查看差异
git log HEAD..origin/main
git log origin/main..HEAD
```

### 步骤 2: 决定策略

- **如果远程只有 README 等初始文件**：可以强制推送
- **如果远程有重要代码**：需要合并

### 步骤 3: 执行推送

#### 如果远程只有初始文件（推荐强制推送）：

```bash
git push -u origin main --force
```

#### 如果需要保留远程更改：

```bash
# 拉取并合并
git pull origin main --allow-unrelated-histories

# 解决可能的冲突，然后
git push -u origin main
```

## 🔍 检查目录名称

⚠️ **注意**：从提交信息看，有 `bota/` 目录。请确认：
- 应该是 `botA/` 而不是 `bota/`

如果目录名错误，需要重命名：

```powershell
# 检查目录
ls -Name | Select-String "bot"

# 如果看到 bota，重命名
if (Test-Path "bota") {
    Rename-Item -Path "bota" -NewName "botA"
    git add .
    git commit -m "修复：重命名 bota 为 botA"
}
```

## ✅ 完整操作流程

```powershell
# 1. 检查目录名称
Get-ChildItem -Directory | Where-Object { $_.Name -like "bot*" }

# 2. 查看远程更改
git fetch origin
git log HEAD..origin/main --oneline

# 3. 如果远程只有初始文件，强制推送
git push -u origin main --force

# 或者如果需要合并
git pull origin main --allow-unrelated-histories
git push -u origin main
```

