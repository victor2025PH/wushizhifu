# æœåŠ¡å™¨éƒ¨ç½²å‘½ä»¤

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### 1. SSH è¿æ¥åˆ°æœåŠ¡å™¨
```bash
ssh ubuntu@your-server-ip
```

### 2. è¿›å…¥ Bot é¡¹ç›®ç›®å½•
```bash
cd /home/ubuntu/wushizhifu/bot
```

### 3. æ‹‰å–æœ€æ–°ä»£ç 
```bash
git pull origin main
```

### 4. æ£€æŸ¥ä»£ç æ›´æ–°
```bash
git log --oneline -5
```

### 5. é‡å¯ Bot æœåŠ¡
```bash
sudo systemctl restart wushizhifu-bot
```

### 6. æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
sudo systemctl status wushizhifu-bot
```

### 7. æŸ¥çœ‹æ—¥å¿—ï¼ˆå®æ—¶ç›‘æ§ï¼‰
```bash
sudo journalctl -u wushizhifu-bot -f
```

## ğŸ” éªŒè¯éƒ¨ç½²

### éªŒè¯ä¿®å¤æ˜¯å¦ç”Ÿæ•ˆ
1. æŸ¥çœ‹æ—¥å¿—ä¸­æ˜¯å¦æœ‰é”™è¯¯ï¼š
   ```bash
   sudo journalctl -u wushizhifu-bot -n 50
   ```

2. æµ‹è¯•ç®¡ç†å‘˜é¢æ¿åŠŸèƒ½ï¼š
   - åœ¨ Telegram ä¸­ç‚¹å‡» `/admin` å‘½ä»¤
   - æµ‹è¯•æ‰€æœ‰æŒ‰é’®æ˜¯å¦æ­£å¸¸å·¥ä½œ
   - æ£€æŸ¥æ˜¯å¦è¿˜æœ‰é”™è¯¯æç¤º

## ğŸ“ ä¸€é”®éƒ¨ç½²å‘½ä»¤ï¼ˆç»„åˆï¼‰

```bash
cd /home/ubuntu/wushizhifu/bot && \
git pull origin main && \
sudo systemctl restart wushizhifu-bot && \
echo "éƒ¨ç½²å®Œæˆï¼æŸ¥çœ‹æ—¥å¿—ï¼š" && \
sudo journalctl -u wushizhifu-bot -n 20
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½æ•°æ®åº“**ï¼ˆå¯é€‰ä½†æ¨èï¼‰ï¼š
   ```bash
   cp wushipay.db wushipay.db.backup.$(date +%Y%m%d_%H%M%S)
   ```

2. **æ£€æŸ¥ Python ç¯å¢ƒ**ï¼š
   ```bash
   python3 --version
   ```

3. **æ£€æŸ¥ä¾èµ–**ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š
   ```bash
   pip3 list | grep aiogram
   ```

## ğŸ› å¦‚æœå‡ºç°é—®é¢˜

### æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
```bash
sudo journalctl -u wushizhifu-bot -n 100 --no-pager
```

### æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ
```bash
sudo systemctl is-active wushizhifu-bot
```

### æ‰‹åŠ¨å¯åŠ¨æœåŠ¡ï¼ˆå¦‚æœè‡ªåŠ¨å¯åŠ¨å¤±è´¥ï¼‰
```bash
sudo systemctl start wushizhifu-bot
```

### é‡æ–°åŠ è½½æœåŠ¡é…ç½®ï¼ˆå¦‚æœä¿®æ”¹äº† systemd é…ç½®ï¼‰
```bash
sudo systemctl daemon-reload
sudo systemctl restart wushizhifu-bot
```

## âœ… éƒ¨ç½²æˆåŠŸæ ‡å¿—

éƒ¨ç½²æˆåŠŸåï¼Œæ—¥å¿—ä¸­åº”è¯¥çœ‹åˆ°ï¼š
- âœ… Bot åˆå§‹åŒ–æˆåŠŸ
- âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ
- âœ… Bot commands è®¾ç½®æˆåŠŸ
- âœ… å¼€å§‹ polling
- âŒ **ä¸åº”è¯¥æœ‰** `NameError` æˆ– `AttributeError` é”™è¯¯

