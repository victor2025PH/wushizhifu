# Bot B éƒ¨ç½²è¯´æ˜

## ğŸ“ æœåŠ¡å™¨ç›®å½•ç»“æ„

æ ¹æ®æ‚¨çš„æœåŠ¡å™¨é…ç½®ï¼Œå»ºè®®çš„ç›®å½•ç»“æ„ï¼š

```
/home/ubuntu/wushizhifu/
â”œâ”€â”€ bot/              # Bot A (ç¬¬ä¸€ä¸ª Bot)
â”‚   â”œâ”€â”€ .env          # åŒ…å« BOT_TOKEN å’Œ BOT_TOKEN_B
â”‚   â”œâ”€â”€ bot.py
â”‚   â””â”€â”€ ...
â””â”€â”€ otc-bot/          # Bot B (OTC ç¾¤ç»„ç®¡ç† Bot)
    â”œâ”€â”€ bot.py
    â”œâ”€â”€ config.py
    â”œâ”€â”€ database.py
    â”œâ”€â”€ requirements.txt
    â””â”€â”€ ...
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºç›®å½•

```bash
cd /home/ubuntu/wushizhifu
mkdir -p otc-bot
cd otc-bot
```

### 2. ä¸Šä¼ æ–‡ä»¶

ä½¿ç”¨ WinSCP æˆ–å…¶ä»–å·¥å…·ï¼Œå°† `wushizhifu-otc-bot` ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ `/home/ubuntu/wushizhifu/otc-bot/` ç›®å½•ã€‚

**éœ€è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼š**
- `bot.py`
- `config.py`
- `database.py`
- `requirements.txt`
- `services/` ç›®å½•ï¼ˆåŒ…å« `price_service.py`ï¼‰
- `test_setup.py` (å¯é€‰ï¼Œç”¨äºæµ‹è¯•)
- `README.md` å’Œ `QUICK_START.md` (å¯é€‰)

### 3. é…ç½® .env æ–‡ä»¶

ç¡®ä¿ `/home/ubuntu/wushizhifu/bot/.env` æ–‡ä»¶åŒ…å«ä¸¤ä¸ª Bot Tokenï¼š

```env
BOT_TOKEN=your_first_bot_token_here
BOT_TOKEN_B=your_second_bot_token_here
```

**æ³¨æ„**ï¼šBot B ä¼šä»ç¬¬ä¸€ä¸ª Bot çš„ `.env` æ–‡ä»¶è¯»å– `BOT_TOKEN_B`ã€‚

### 4. å®‰è£…ä¾èµ–

```bash
cd /home/ubuntu/wushizhifu/otc-bot
pip3 install -r requirements.txt
```

æˆ–è€…ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼š

```bash
cd /home/ubuntu/wushizhifu/otc-bot
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 5. æµ‹è¯•é…ç½®

```bash
cd /home/ubuntu/wushizhifu/otc-bot
python3 test_setup.py
```

### 6. è¿è¡Œ Bot

```bash
cd /home/ubuntu/wushizhifu/otc-bot
python3 bot.py
```

## ğŸ“ .env æ–‡ä»¶è·¯å¾„è¯´æ˜

Bot B ä¼šæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾ `.env` æ–‡ä»¶ï¼š

1. `../bot/.env` - ä» otc-bot ç›®å½•å‘ä¸Šï¼Œè¿›å…¥ bot ç›®å½•
2. `../.env` - çˆ¶ç›®å½•ï¼ˆwushizhifuï¼‰
3. `./.env` - å½“å‰ç›®å½•ï¼ˆotc-botï¼‰
4. `~/wushizhifu/bot/.env` - ç”¨æˆ·ç›®å½•ä¸‹çš„ bot
5. `~/wushizhifu/.env` - ç”¨æˆ·ç›®å½•ä¸‹çš„æ ¹ç›®å½•
6. `/home/ubuntu/wushizhifu/bot/.env` - æœåŠ¡å™¨ç»å¯¹è·¯å¾„
7. `/home/ubuntu/wushizhifu/.env` - æœåŠ¡å™¨æ ¹è·¯å¾„
8. å½“å‰å·¥ä½œç›®å½•çš„ `.env`

## ğŸ”§ é…ç½®æ–‡ä»¶è·¯å¾„å·²ä¿®æ­£

å·²æ›´æ–° `config.py`ï¼Œç°åœ¨ä¼šæ­£ç¡®æŸ¥æ‰¾æœåŠ¡å™¨ä¸Šçš„ `.env` æ–‡ä»¶ä½ç½®ã€‚

## ğŸ“‹ éªŒè¯éƒ¨ç½²

éƒ¨ç½²åï¼Œè¿è¡Œæµ‹è¯•ï¼š

```bash
cd /home/ubuntu/wushizhifu/otc-bot
python3 test_setup.py
```

å¦‚æœçœ‹åˆ°ï¼š
```
âœ… All tests passed! Bot B is ready to run.
```

è¯´æ˜é…ç½®æ­£ç¡®ã€‚

## âš™ï¸ ä½œä¸ºç³»ç»ŸæœåŠ¡è¿è¡Œï¼ˆå¯é€‰ï¼‰

åˆ›å»º systemd æœåŠ¡æ–‡ä»¶ï¼š

```bash
sudo nano /etc/systemd/system/otc-bot.service
```

å†…å®¹ï¼š

```ini
[Unit]
Description=OTC Group Management Bot (Bot B)
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/wushizhifu/otc-bot
Environment="PATH=/home/ubuntu/wushizhifu/otc-bot/venv/bin"
ExecStart=/home/ubuntu/wushizhifu/otc-bot/venv/bin/python /home/ubuntu/wushizhifu/otc-bot/bot.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
sudo systemctl daemon-reload
sudo systemctl enable otc-bot
sudo systemctl start otc-bot
sudo systemctl status otc-bot
```

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ï¼šæ‰¾ä¸åˆ° .env æ–‡ä»¶

**è§£å†³æ–¹æ³•**ï¼š
1. ç¡®è®¤ `.env` æ–‡ä»¶åœ¨ `/home/ubuntu/wushizhifu/bot/.env`
2. æˆ–å¤åˆ¶åˆ° `/home/ubuntu/wushizhifu/otc-bot/.env`
3. æ£€æŸ¥æ–‡ä»¶æƒé™ï¼š`chmod 600 .env`

### é—®é¢˜ï¼šæ‰¾ä¸åˆ° BOT_TOKEN_B

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ `.env` æ–‡ä»¶ç¬¬äºŒè¡Œæ˜¯å¦åŒ…å« `BOT_TOKEN_B=...`
2. æˆ–è®¾ç½®ç¯å¢ƒå˜é‡ï¼š`export BOT_TOKEN_B=your_token`
3. è¿è¡Œ `python3 test_setup.py` æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

