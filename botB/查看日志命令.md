# Bot æ—¥å¿—æŸ¥çœ‹å‘½ä»¤

## ðŸ“Š å®žæ—¶æŸ¥çœ‹æ—¥å¿—

### æŸ¥çœ‹ Bot å®žæ—¶æ—¥å¿—ï¼ˆæŽ¨èï¼‰
```bash
# å®žæ—¶è·Ÿè¸ªæ—¥å¿—ï¼ˆæŒ‰ Ctrl+C é€€å‡ºï¼‰
# æ ¹æ®å®žé™…æœåŠ¡åç§°é€‰æ‹©ï¼š
sudo journalctl -u otc-bot -f          # Bot B æœåŠ¡åï¼ˆæ ¹æ® otc-bot.serviceï¼‰
# æˆ–è€…
sudo journalctl -u wushipay-bot -f     # å¦‚æžœä½¿ç”¨å…¶ä»–æœåŠ¡å

# å¦‚æžœä¸çŸ¥é“æœåŠ¡åï¼Œå…ˆæŸ¥æ‰¾ï¼š
sudo systemctl list-units | grep -i bot
```

### æŸ¥çœ‹æœ€è¿‘ 100 è¡Œæ—¥å¿—
```bash
sudo journalctl -u wushipay-bot -n 100
```

### æŸ¥çœ‹æœ€è¿‘ 1 å°æ—¶çš„æ—¥å¿—
```bash
sudo journalctl -u wushipay-bot --since "1 hour ago"
```

### æŸ¥çœ‹ä»Šå¤©çš„æ—¥å¿—
```bash
sudo journalctl -u wushipay-bot --since today
```

### æŸ¥çœ‹æŒ‡å®šæ—¶é—´æ®µçš„æ—¥å¿—
```bash
# æŸ¥çœ‹ä»Šå¤© 12:00 åˆ°çŽ°åœ¨çš„æ—¥å¿—
sudo journalctl -u wushipay-bot --since "12:00" --until now

# æŸ¥çœ‹æ˜¨å¤©çš„æ—¥å¿—
sudo journalctl -u wushipay-bot --since yesterday --until today
```

## ðŸ” æœç´¢æ—¥å¿—

### æœç´¢åŒ…å«ç‰¹å®šå…³é”®è¯çš„æ—¥å¿—
```bash
# æœç´¢åŒ…å« "admin" çš„æ—¥å¿—
sudo journalctl -u wushipay-bot | grep -i admin

# æœç´¢åŒ…å« "error" çš„æ—¥å¿—
sudo journalctl -u wushipay-bot | grep -i error

# æœç´¢åŒ…å«ç”¨æˆ·IDçš„æ—¥å¿—
sudo journalctl -u wushipay-bot | grep "7965752450"
```

### å®žæ—¶æœç´¢æ—¥å¿—
```bash
# å®žæ—¶æœç´¢åŒ…å« "error" çš„æ—¥å¿—
sudo journalctl -u wushipay-bot -f | grep -i error
```

## ðŸ“‹ æœåŠ¡çŠ¶æ€å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
sudo systemctl status wushipay-bot
```

### é‡å¯æœåŠ¡
```bash
sudo systemctl restart wushipay-bot
```

### åœæ­¢æœåŠ¡
```bash
sudo systemctl stop wushipay-bot
```

### å¯åŠ¨æœåŠ¡
```bash
sudo systemctl start wushipay-bot
```

### æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ
```bash
sudo systemctl is-active wushipay-bot
```

## ðŸ› è°ƒè¯•å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡å¯åŠ¨æ—¥å¿—
```bash
sudo journalctl -u wushipay-bot -b
```

### æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—ï¼ˆåŒ…æ‹¬åŽ†å²ï¼‰
```bash
sudo journalctl -u wushipay-bot --no-pager
```

### å¯¼å‡ºæ—¥å¿—åˆ°æ–‡ä»¶
```bash
# å¯¼å‡ºæœ€è¿‘ 1000 è¡Œæ—¥å¿—
sudo journalctl -u wushipay-bot -n 1000 > bot_logs.txt

# å¯¼å‡ºä»Šå¤©çš„æ—¥å¿—
sudo journalctl -u wushipay-bot --since today > bot_logs_today.txt
```

## ðŸ”§ å¿«é€Ÿè¯Šæ–­å‘½ä»¤

### ä¸€é”®æŸ¥çœ‹æœåŠ¡çŠ¶æ€å’Œæœ€è¿‘æ—¥å¿—
```bash
echo "=== æœåŠ¡çŠ¶æ€ ===" && \
sudo systemctl status wushipay-bot --no-pager -l && \
echo -e "\n=== æœ€è¿‘ 50 è¡Œæ—¥å¿— ===" && \
sudo journalctl -u wushipay-bot -n 50 --no-pager
```

### æŸ¥çœ‹é”™è¯¯æ—¥å¿—
```bash
sudo journalctl -u wushipay-bot -p err --since "1 hour ago"
```

### æŸ¥çœ‹è­¦å‘Šå’Œé”™è¯¯
```bash
sudo journalctl -u wushipay-bot -p warning --since "1 hour ago"
```

## ðŸ“ å¸¸ç”¨ç»„åˆå‘½ä»¤

### å®žæ—¶ç›‘æŽ§ + é«˜äº®é”™è¯¯
```bash
sudo journalctl -u wushipay-bot -f | grep --color=always -E "ERROR|WARNING|error|warning|$"
```

### æŸ¥çœ‹ç‰¹å®šç”¨æˆ·çš„äº¤äº’æ—¥å¿—
```bash
# æ›¿æ¢ USER_ID ä¸ºå®žé™…ç”¨æˆ·ID
sudo journalctl -u wushipay-bot -f | grep "USER_ID"
```

## ðŸ’¡ æç¤º

1. **æœåŠ¡åç§°å¯èƒ½ä¸åŒ**ï¼šå¦‚æžœ `wushipay-bot` ä¸å·¥ä½œï¼Œå°è¯•ï¼š
   - `otc-bot`
   - `botB`
   - æˆ–æ£€æŸ¥ `/etc/systemd/system/` ç›®å½•ä¸­çš„ `.service` æ–‡ä»¶

2. **æŸ¥çœ‹æœåŠ¡æ–‡ä»¶**ï¼š
   ```bash
   cat /etc/systemd/system/wushipay-bot.service
   ```

3. **å¦‚æžœæœåŠ¡ä¸å­˜åœ¨**ï¼Œå¯èƒ½éœ€è¦ï¼š
   ```bash
   # æŸ¥æ‰¾æ‰€æœ‰ bot ç›¸å…³æœåŠ¡
   sudo systemctl list-units | grep -i bot
   ```

4. **ç›´æŽ¥æŸ¥çœ‹ Python æ—¥å¿—æ–‡ä»¶**ï¼ˆå¦‚æžœé…ç½®äº†æ–‡ä»¶æ—¥å¿—ï¼‰ï¼š
   ```bash
   # æŸ¥çœ‹æ—¥å¿—ç›®å½•
   ls -la /opt/wushizhifu/bot/logs/ 2>/dev/null || \
   ls -la ~/wushizhifu/botB/logs/ 2>/dev/null || \
   find . -name "*.log" -type f
   ```
