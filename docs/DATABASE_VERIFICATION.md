# æ•°æ®åº“è°ƒç”¨éªŒè¯æŠ¥å‘Š

## âœ… éªŒè¯å®Œæˆ

æ‰€æœ‰æ•°æ®åº“è°ƒç”¨å·²ç»Ÿä¸€æŒ‡å‘å…±äº«æ•°æ®åº“ `wushipay.db`ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰ã€‚

## ğŸ“Š æ•°æ®åº“è·¯å¾„ç»Ÿä¸€

### ç»Ÿä¸€è·¯å¾„
æ‰€æœ‰ç³»ç»Ÿç°åœ¨éƒ½ä½¿ç”¨ï¼š**é¡¹ç›®æ ¹ç›®å½•çš„ `wushipay.db`**

### æ•°æ®åº“è¿æ¥æ¨¡å—

#### 1. BotA / Miniapp API Server
- **æ¨¡å—**: `database/db.py`
- **ç±»**: `Database`
- **è·¯å¾„**: é¡¹ç›®æ ¹ç›®å½• `wushipay.db`
- **è°ƒç”¨**: é€šè¿‡ `database.user_repository`, `database.transaction_repository` ç­‰

#### 2. BotB
- **æ¨¡å—**: `botB/database.py`
- **ç±»**: `Database`
- **è·¯å¾„**: é¡¹ç›®æ ¹ç›®å½• `wushipay.db`
- **è°ƒç”¨**: é€šè¿‡ `from database import db`

## ğŸ” éªŒè¯æ¸…å•

### âœ… BotAæ•°æ®åº“è¿æ¥
- [x] `database/db.py` - å·²æ›´æ–°ä¸ºä½¿ç”¨æ ¹ç›®å½• `wushipay.db`
- [x] `database/models.py` - é€šè¿‡ `database.db` è¿æ¥
- [x] æ‰€æœ‰ repository æ¨¡å—éƒ½ä½¿ç”¨ `database.db`

### âœ… BotBæ•°æ®åº“è¿æ¥
- [x] `botB/database.py` - å·²æ›´æ–°ä¸ºä½¿ç”¨æ ¹ç›®å½• `wushipay.db`
- [x] ç§»é™¤äº† `botB/config.py` ä¸­çš„ `DB_PATH = "otc_bot.db"` é…ç½®ï¼ˆä¸å†ä½¿ç”¨ï¼‰
- [x] æ‰€æœ‰ BotB æ¨¡å—é€šè¿‡ `from database import db` ä½¿ç”¨æ•°æ®åº“

### âœ… Miniapp API Server
- [x] `api_server.py` - ä½¿ç”¨ `database.user_repository` ç­‰ï¼Œé€šè¿‡ `database.db` è¿æ¥
- [x] è·¯å¾„ç»Ÿä¸€ä¸ºæ ¹ç›®å½• `wushipay.db`

### âœ… å·²æ¸…ç†çš„æ—§é…ç½®
- [x] `botB/config.py` ä¸­çš„ `DB_PATH = "otc_bot.db"` å·²åˆ é™¤
- [x] `botB/test_setup.py` ä¸­çš„ `Config.DB_PATH` å¼•ç”¨ï¼ˆå¦‚æœå­˜åœ¨éœ€è¦æ£€æŸ¥ï¼‰

## ğŸ“ ä»£ç å˜æ›´æ‘˜è¦

### 1. `database/db.py`
- âœ… ç»Ÿä¸€è·¯å¾„é€»è¾‘ï¼Œç›´æ¥ä½¿ç”¨æ ¹ç›®å½• `wushipay.db`
- âœ… ç§»é™¤äº†å¯¹ `botA/wushipay.db` çš„æ£€æŸ¥é€»è¾‘

### 2. `botB/database.py`
- âœ… ç»Ÿä¸€è·¯å¾„é€»è¾‘ï¼Œç›´æ¥ä½¿ç”¨æ ¹ç›®å½• `wushipay.db`
- âœ… ç§»é™¤äº†å¯¹ `botA/wushipay.db` çš„æ£€æŸ¥é€»è¾‘

### 3. `botB/config.py`
- âœ… åˆ é™¤äº† `DB_PATH = "otc_bot.db"` é…ç½®é¡¹ï¼ˆä¸å†ä½¿ç”¨ï¼‰

## âš ï¸ æ³¨æ„äº‹é¡¹

### æ—§æ•°æ®åº“æ–‡ä»¶
ä»¥ä¸‹æ—§æ•°æ®åº“æ–‡ä»¶å¯ä»¥åˆ é™¤ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š
- `botB/otc_bot.db` - BotBçš„æ—§æ•°æ®åº“ï¼ˆä¸å†ä½¿ç”¨ï¼‰
- `botA/wushipay.db` - å¦‚æœå­˜åœ¨ï¼Œå¯è¿ç§»åˆ°æ ¹ç›®å½•ååˆ é™¤ï¼ˆæ–°å®‰è£…ä¸éœ€è¦ï¼‰

### æ•°æ®åº“åˆå§‹åŒ–
- **BotA**: è°ƒç”¨ `database.models.init_database()` åˆå§‹åŒ–æ‰€æœ‰è¡¨
- **BotB**: `botB/database.py` çš„ `_init_database()` ä»ç„¶ä¿ç•™ï¼Œç”¨äºåˆå§‹åŒ–BotBç‰¹å®šçš„é»˜è®¤æ•°æ®
- ä¸¤ä¸ªåˆå§‹åŒ–æ–¹æ³•éƒ½ä½¿ç”¨ `CREATE TABLE IF NOT EXISTS`ï¼Œä¸ä¼šå†²çª

## âœ… éªŒè¯ç»“æœ

æ‰€æœ‰æ•°æ®åº“è°ƒç”¨å·²ç¡®è®¤ï¼š
1. âœ… ç»Ÿä¸€ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„ `wushipay.db`
2. âœ… ä¸å†æœ‰ `otc_bot.db` çš„å¼•ç”¨
3. âœ… é…ç½®æ–‡ä»¶ä¸­å·²æ¸…ç†æ—§è·¯å¾„é…ç½®
4. âœ… æ‰€æœ‰æ¨¡å—é€šè¿‡ç»Ÿä¸€çš„æ•°æ®åº“è¿æ¥ç±»è®¿é—®æ•°æ®åº“

